# 本福特定律与计算层次性 - 可重复性数据

中文版 | [English](README.md)

## 概述

本仓库包含我们关于细胞自动机中本福特定律与计算层次性研究的数据和代码，用于重现鲁棒性分析。该分析展示了Rule 110的本福特一致性行为在1000次独立运行中（不同初始条件下）的稳健性。

## 系统要求

- **Python 版本**: 3.13.0
- **操作系统**: 跨平台（在Windows上测试通过，Linux/macOS上应该也能正常运行）

## 仓库内容

### 1. `main.py`
主分析脚本，对细胞自动机执行k层可预测性（L_k）分析。

**主要功能：**
- 从随机初始条件演化四种基本细胞自动机（规则32、110、30、184）
- 使用块熵识别活跃区域并确定动态高度
- 使用扩张邻域预测器计算k=1到30的k层可预测性（L_k）
- 评估首位数字分布并执行本福特定律符合性检验
- 为每次运行输出详细结果

**主要步骤：**
1. 从随机初始条件生成8000步的CA演化
2. 应用块熵筛选以排除静态/稳态区域
3. 采样240个固定大小的窗口（256×256）并计算每个尺度的L_k
4. 选择峰值尺度（最大极差，k≠1）进行本福特分析
5. 计算卡方统计量、p值和MAD（平均绝对偏差）

### 2. `requirements.txt`
运行分析所需的Python包依赖。

**核心依赖：**
- `numpy==2.3.3` - 数值计算
- `pandas==2.3.3` - 数据处理和CSV读写
- `matplotlib==3.10.6` - 可视化
- `scipy==1.16.2` - 统计检验（卡方检验）
- `seaborn==0.13.2` - 增强绘图

**安装方法：**
```bash
pip install -r requirements.txt
```

### 3. `summary_results.csv`
Rule 110和Rule 184的1000次独立运行的汇总结果。

**列说明：**
- `folder_name`: 每次运行的时间戳标识符（格式：YYMMDD_HHMMSS）
- `dynamic_height`: 该次运行由块熵确定的活跃高度
- `mad_184`: Rule 184在其峰值尺度的平均绝对偏差
- `p_value_184`: Rule 184的卡方检验p值
- `mad_110`: Rule 110在其峰值尺度的平均绝对偏差
- `p_value_110`: Rule 110的卡方检验p值

**关键统计（来自1000次运行）：**
- Rule 110: 中位数MAD = 0.032，展示了一致的本福特符合性
- Rule 184: 中位数MAD = 0.113，显示系统性偏离本福特定律

### 4. `运行结果/` 目录
包含所有1000次独立运行的详细输出。

**目录结构：**
每个子目录以时间戳命名（例如 `251019_201644/`），包含：
- `*.csv` 文件：每个规则在所有层级（k=1-30）的L_k值
- `*.png` 文件：可视化图表（箱线图、首位数字直方图）
- `*.txt` 文件：运行元数据（随机种子、参数、统计信息）

**总内容：**
- 约7000个文件（4000个CSV，2000个PNG，1000个TXT）
- 每次运行都可以使用记录的随机种子完全重现

## 使用方法

### 运行单次分析

```bash
python main.py
```

这将会：
1. 生成用于可重复性的随机种子
2. 演化所有四种CA规则
3. 计算L_k并执行本福特分析
4. 将结果保存为CSV文件并生成图表

### 分析现有结果

可以直接加载 `summary_results.csv` 文件进行统计分析：

```python
import pandas as pd
import numpy as np

# 加载汇总数据
df = pd.read_csv('summary_results.csv')

# 计算统计量
print(f"Rule 110 MAD: 中位数={np.median(df['mad_110']):.4f}")
print(f"Rule 184 MAD: 中位数={np.median(df['mad_184']):.4f}")
```

## 可重复性说明

- 所有运行使用不同的随机种子，记录在各自的输出目录中
- 块熵参数固定：块高度=40，n-gram=3×3，区间数=20，截断区间=1，连续阈值=5
- 采样参数：240个区域，256×256窗口，60%训练 / 40%测试划分
- 该分析计算密集（在标准硬件上运行1000次约需35小时）

## 许可证

此数据用于研究和可重复性目的。如果您在研究中使用此代码或数据，请引用我们的论文。

## 联系方式

如有问题或疑问，请在GitHub上提交issue。

---

**注意**：目录名和文件路径使用中文字符（`运行结果` = "run results"）。这是有意为之，在现代系统上不会影响功能。

